# =============================================================================
# Portable Dev System - Yazi Keymap
# =============================================================================

[manager]

keymap = [
  # Navigation
  { on = ["k"], run = "arrow -1", desc = "Move up" },
  { on = ["j"], run = "arrow 1", desc = "Move down" },
  { on = ["K"], run = "arrow -5", desc = "Move up 5" },
  { on = ["J"], run = "arrow 5", desc = "Move down 5" },
  { on = ["h"], run = "leave", desc = "Go to parent" },
  { on = ["l"], run = "enter", desc = "Enter directory" },
  { on = ["<Enter>"], run = "open", desc = "Open file" },
  { on = ["<S-Enter>"], run = "open --interactive", desc = "Open interactive" },

  # Go to locations
  { on = ["g", "h"], run = "cd ~", desc = "Go home" },
  { on = ["g", "d"], run = "cd ~/dev", desc = "Go to dev" },
  { on = ["g", "c"], run = "cd ~/.config", desc = "Go to config" },
  { on = ["/"], run = "search fd", desc = "Search files" },

  # Worktree navigation
  { on = ["g", "w"], run = "shell 'cd $(git worktree list 2>/dev/null | fzf | awk \"{print \\$1}\") && yazi' --confirm", desc = "Go to worktree" },

  # Git
  { on = ["g", "i"], run = "shell lazygit --block", desc = "Open lazygit" },

  # Selection
  { on = ["<Space>"], run = "select --state=none", desc = "Toggle selection" },
  { on = ["v"], run = "visual_mode", desc = "Visual mode" },
  { on = ["V"], run = "visual_mode --unset", desc = "Exit visual mode" },
  { on = ["a"], run = "select_all --state=true", desc = "Select all" },
  { on = ["A"], run = "select_all --state=none", desc = "Unselect all" },

  # Operations
  { on = ["y"], run = "yank", desc = "Yank (copy)" },
  { on = ["x"], run = "yank --cut", desc = "Cut" },
  { on = ["p"], run = "paste", desc = "Paste" },
  { on = ["P"], run = "paste --force", desc = "Paste (overwrite)" },
  { on = ["d"], run = "remove", desc = "Delete" },
  { on = ["D"], run = "remove --permanently", desc = "Delete permanently" },
  { on = ["r"], run = "rename", desc = "Rename" },
  { on = ["c"], run = "create", desc = "Create file/dir" },

  # Copy paths
  { on = ["Y", "y"], run = "copy path", desc = "Copy file path" },
  { on = ["Y", "d"], run = "copy dirname", desc = "Copy directory path" },
  { on = ["Y", "n"], run = "copy filename", desc = "Copy filename" },

  # Visibility
  { on = ["."], run = "hidden toggle", desc = "Toggle hidden files" },

  # Preview
  { on = ["<Tab>"], run = "preview_toggle", desc = "Toggle preview" },

  # Quit
  { on = ["q"], run = "quit", desc = "Quit" },
  { on = ["<Esc>"], run = "escape", desc = "Cancel/escape" },

  # Help
  { on = ["?"], run = "help", desc = "Show help" },
]
